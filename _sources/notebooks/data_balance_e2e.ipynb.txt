{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# End to End Data Balance and Error Mitigation\n",
    "This Notebook will demonstrate how to use both the Data Balance Analysis capabilities and error mitigation functions together using an example HR dataset which is a tabular dataset with a label column that indicates whether or not a person is promoted based on attributes such as education, gender, number of trainings, and other factors. \n",
    "The steps that we will take in this notebook are \n",
    "1. We will first conduct an analysis on how balanced the data is. \n",
    "2. We will train an example model to see how it performs on the data using metrics and the Responsible AI Error Analysis Dashboard. \n",
    "3. We will try to balance the data to mitigate biases that may have resulted from unbalanced data\n",
    "5. We will train a new model using our data after applying \n",
    "4. We will then compare model performance before and after mitigating data imbalances by again using various performance metrics and the Error Analysis Dashboard."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "First we import all the dependencies needed in our analysis. This includes the classes to produce the data balance metrics, the sklearn functions to see the model performance and the error mitigation steps like DataRebalance and DataSplit that we apply to the dataset itself. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [],
   "source": [
    "import sys\n",
    "sys.path.append('../notebooks')\n",
    "\n",
    "import pandas as pd\n",
    "import matplotlib.pyplot as plt\n",
    "import numpy as np\n",
    "\n",
    "from imblearn.over_sampling import SMOTE\n",
    "\n",
    "import raimitigations.dataprocessing as dp\n",
    "\n",
    "from raimitigations.databalanceanalysis import (\n",
    "    FeatureBalanceMeasure,\n",
    "    AggregateBalanceMeasure,\n",
    "    DistributionBalanceMeasure,\n",
    ")\n",
    "\n",
    "from lightgbm import LGBMClassifier\n",
    "\n",
    "from sklearn import metrics\n",
    "from sklearn.model_selection import train_test_split\n",
    "from sklearn.metrics import confusion_matrix, classification_report\n",
    "from sklearn.preprocessing import OrdinalEncoder\n",
    "\n",
    "from download import download_datasets"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Train LightGBM Model\n",
    "Now we import the tabular dataset that we will look at in the example, we load it into a pandas dataframe that we can then modify and use for all the other steps. For the data balance analysis portion we need our label columns and a list of sensitive columns that are interested in checking for balance. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {},
   "outputs": [],
   "source": [
    "data_dir = \"../datasets/\"\n",
    "download_datasets(data_dir)\n",
    "df = pd.read_csv(data_dir + 'hr_promotion/train.csv')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>employee_id</th>\n",
       "      <th>department</th>\n",
       "      <th>region</th>\n",
       "      <th>education</th>\n",
       "      <th>gender</th>\n",
       "      <th>recruitment_channel</th>\n",
       "      <th>no_of_trainings</th>\n",
       "      <th>age</th>\n",
       "      <th>previous_year_rating</th>\n",
       "      <th>length_of_service</th>\n",
       "      <th>KPIs_met &gt;80%</th>\n",
       "      <th>awards_won?</th>\n",
       "      <th>avg_training_score</th>\n",
       "      <th>is_promoted</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>65438</td>\n",
       "      <td>Sales &amp; Marketing</td>\n",
       "      <td>region_7</td>\n",
       "      <td>Master's &amp; above</td>\n",
       "      <td>f</td>\n",
       "      <td>sourcing</td>\n",
       "      <td>1</td>\n",
       "      <td>35</td>\n",
       "      <td>5.0</td>\n",
       "      <td>8</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>49</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>65141</td>\n",
       "      <td>Operations</td>\n",
       "      <td>region_22</td>\n",
       "      <td>Bachelor's</td>\n",
       "      <td>m</td>\n",
       "      <td>other</td>\n",
       "      <td>1</td>\n",
       "      <td>30</td>\n",
       "      <td>5.0</td>\n",
       "      <td>4</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>60</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>7513</td>\n",
       "      <td>Sales &amp; Marketing</td>\n",
       "      <td>region_19</td>\n",
       "      <td>Bachelor's</td>\n",
       "      <td>m</td>\n",
       "      <td>sourcing</td>\n",
       "      <td>1</td>\n",
       "      <td>34</td>\n",
       "      <td>3.0</td>\n",
       "      <td>7</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>50</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>2542</td>\n",
       "      <td>Sales &amp; Marketing</td>\n",
       "      <td>region_23</td>\n",
       "      <td>Bachelor's</td>\n",
       "      <td>m</td>\n",
       "      <td>other</td>\n",
       "      <td>2</td>\n",
       "      <td>39</td>\n",
       "      <td>1.0</td>\n",
       "      <td>10</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>50</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>48945</td>\n",
       "      <td>Technology</td>\n",
       "      <td>region_26</td>\n",
       "      <td>Bachelor's</td>\n",
       "      <td>m</td>\n",
       "      <td>other</td>\n",
       "      <td>1</td>\n",
       "      <td>45</td>\n",
       "      <td>3.0</td>\n",
       "      <td>2</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>73</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>54803</th>\n",
       "      <td>3030</td>\n",
       "      <td>Technology</td>\n",
       "      <td>region_14</td>\n",
       "      <td>Bachelor's</td>\n",
       "      <td>m</td>\n",
       "      <td>sourcing</td>\n",
       "      <td>1</td>\n",
       "      <td>48</td>\n",
       "      <td>3.0</td>\n",
       "      <td>17</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>78</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>54804</th>\n",
       "      <td>74592</td>\n",
       "      <td>Operations</td>\n",
       "      <td>region_27</td>\n",
       "      <td>Master's &amp; above</td>\n",
       "      <td>f</td>\n",
       "      <td>other</td>\n",
       "      <td>1</td>\n",
       "      <td>37</td>\n",
       "      <td>2.0</td>\n",
       "      <td>6</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>56</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>54805</th>\n",
       "      <td>13918</td>\n",
       "      <td>Analytics</td>\n",
       "      <td>region_1</td>\n",
       "      <td>Bachelor's</td>\n",
       "      <td>m</td>\n",
       "      <td>other</td>\n",
       "      <td>1</td>\n",
       "      <td>27</td>\n",
       "      <td>5.0</td>\n",
       "      <td>3</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>79</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>54806</th>\n",
       "      <td>13614</td>\n",
       "      <td>Sales &amp; Marketing</td>\n",
       "      <td>region_9</td>\n",
       "      <td>NaN</td>\n",
       "      <td>m</td>\n",
       "      <td>sourcing</td>\n",
       "      <td>1</td>\n",
       "      <td>29</td>\n",
       "      <td>1.0</td>\n",
       "      <td>2</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>45</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>54807</th>\n",
       "      <td>51526</td>\n",
       "      <td>HR</td>\n",
       "      <td>region_22</td>\n",
       "      <td>Bachelor's</td>\n",
       "      <td>m</td>\n",
       "      <td>other</td>\n",
       "      <td>1</td>\n",
       "      <td>27</td>\n",
       "      <td>1.0</td>\n",
       "      <td>5</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>49</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>54808 rows × 14 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "       employee_id         department     region         education gender  \\\n",
       "0            65438  Sales & Marketing   region_7  Master's & above      f   \n",
       "1            65141         Operations  region_22        Bachelor's      m   \n",
       "2             7513  Sales & Marketing  region_19        Bachelor's      m   \n",
       "3             2542  Sales & Marketing  region_23        Bachelor's      m   \n",
       "4            48945         Technology  region_26        Bachelor's      m   \n",
       "...            ...                ...        ...               ...    ...   \n",
       "54803         3030         Technology  region_14        Bachelor's      m   \n",
       "54804        74592         Operations  region_27  Master's & above      f   \n",
       "54805        13918          Analytics   region_1        Bachelor's      m   \n",
       "54806        13614  Sales & Marketing   region_9               NaN      m   \n",
       "54807        51526                 HR  region_22        Bachelor's      m   \n",
       "\n",
       "      recruitment_channel  no_of_trainings  age  previous_year_rating  \\\n",
       "0                sourcing                1   35                   5.0   \n",
       "1                   other                1   30                   5.0   \n",
       "2                sourcing                1   34                   3.0   \n",
       "3                   other                2   39                   1.0   \n",
       "4                   other                1   45                   3.0   \n",
       "...                   ...              ...  ...                   ...   \n",
       "54803            sourcing                1   48                   3.0   \n",
       "54804               other                1   37                   2.0   \n",
       "54805               other                1   27                   5.0   \n",
       "54806            sourcing                1   29                   1.0   \n",
       "54807               other                1   27                   1.0   \n",
       "\n",
       "       length_of_service  KPIs_met >80%  awards_won?  avg_training_score  \\\n",
       "0                      8              1            0                  49   \n",
       "1                      4              0            0                  60   \n",
       "2                      7              0            0                  50   \n",
       "3                     10              0            0                  50   \n",
       "4                      2              0            0                  73   \n",
       "...                  ...            ...          ...                 ...   \n",
       "54803                 17              0            0                  78   \n",
       "54804                  6              0            0                  56   \n",
       "54805                  3              1            0                  79   \n",
       "54806                  2              0            0                  45   \n",
       "54807                  5              0            0                  49   \n",
       "\n",
       "       is_promoted  \n",
       "0                0  \n",
       "1                0  \n",
       "2                0  \n",
       "3                0  \n",
       "4                0  \n",
       "...            ...  \n",
       "54803            0  \n",
       "54804            0  \n",
       "54805            0  \n",
       "54806            0  \n",
       "54807            0  \n",
       "\n",
       "[54808 rows x 14 columns]"
      ]
     },
     "execution_count": 9,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "df"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "We do some data transformation on the categorical columns in order to make the training data input in the format that the lightGBM model expects. Although lightGBM can internally deal with categorical columns that the user specifies, we need to encode those categories into integers before we are able to train the lightGBM model on it, so we create a scikit pipeline contains the encoder and the LGBM classifier."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>employee_id</th>\n",
       "      <th>department</th>\n",
       "      <th>region</th>\n",
       "      <th>education</th>\n",
       "      <th>gender</th>\n",
       "      <th>recruitment_channel</th>\n",
       "      <th>no_of_trainings</th>\n",
       "      <th>age</th>\n",
       "      <th>previous_year_rating</th>\n",
       "      <th>length_of_service</th>\n",
       "      <th>KPIs_met &gt;80%</th>\n",
       "      <th>awards_won?</th>\n",
       "      <th>avg_training_score</th>\n",
       "      <th>is_promoted</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>65438</td>\n",
       "      <td>Sales &amp; Marketing</td>\n",
       "      <td>region_7</td>\n",
       "      <td>Master's &amp; above</td>\n",
       "      <td>f</td>\n",
       "      <td>sourcing</td>\n",
       "      <td>1</td>\n",
       "      <td>35</td>\n",
       "      <td>5.0</td>\n",
       "      <td>8</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>49</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>65141</td>\n",
       "      <td>Operations</td>\n",
       "      <td>region_22</td>\n",
       "      <td>Bachelor's</td>\n",
       "      <td>m</td>\n",
       "      <td>other</td>\n",
       "      <td>1</td>\n",
       "      <td>30</td>\n",
       "      <td>5.0</td>\n",
       "      <td>4</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>60</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>7513</td>\n",
       "      <td>Sales &amp; Marketing</td>\n",
       "      <td>region_19</td>\n",
       "      <td>Bachelor's</td>\n",
       "      <td>m</td>\n",
       "      <td>sourcing</td>\n",
       "      <td>1</td>\n",
       "      <td>34</td>\n",
       "      <td>3.0</td>\n",
       "      <td>7</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>50</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>2542</td>\n",
       "      <td>Sales &amp; Marketing</td>\n",
       "      <td>region_23</td>\n",
       "      <td>Bachelor's</td>\n",
       "      <td>m</td>\n",
       "      <td>other</td>\n",
       "      <td>2</td>\n",
       "      <td>39</td>\n",
       "      <td>1.0</td>\n",
       "      <td>10</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>50</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>48945</td>\n",
       "      <td>Technology</td>\n",
       "      <td>region_26</td>\n",
       "      <td>Bachelor's</td>\n",
       "      <td>m</td>\n",
       "      <td>other</td>\n",
       "      <td>1</td>\n",
       "      <td>45</td>\n",
       "      <td>3.0</td>\n",
       "      <td>2</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>73</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "   employee_id         department     region         education gender  \\\n",
       "0        65438  Sales & Marketing   region_7  Master's & above      f   \n",
       "1        65141         Operations  region_22        Bachelor's      m   \n",
       "2         7513  Sales & Marketing  region_19        Bachelor's      m   \n",
       "3         2542  Sales & Marketing  region_23        Bachelor's      m   \n",
       "4        48945         Technology  region_26        Bachelor's      m   \n",
       "\n",
       "  recruitment_channel  no_of_trainings  age  previous_year_rating  \\\n",
       "0            sourcing                1   35                   5.0   \n",
       "1               other                1   30                   5.0   \n",
       "2            sourcing                1   34                   3.0   \n",
       "3               other                2   39                   1.0   \n",
       "4               other                1   45                   3.0   \n",
       "\n",
       "   length_of_service  KPIs_met >80%  awards_won?  avg_training_score  \\\n",
       "0                  8              1            0                  49   \n",
       "1                  4              0            0                  60   \n",
       "2                  7              0            0                  50   \n",
       "3                 10              0            0                  50   \n",
       "4                  2              0            0                  73   \n",
       "\n",
       "   is_promoted  \n",
       "0            0  \n",
       "1            0  \n",
       "2            0  \n",
       "3            0  \n",
       "4            0  "
      ]
     },
     "execution_count": 10,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "cols_of_interest = [\"education\", \"recruitment_channel\"]\n",
    "categorical_cols = [\n",
    "    \"department\",\n",
    "    \"gender\",\n",
    "    \"education\",\n",
    "    \"region\",\n",
    "    \"recruitment_channel\",\n",
    "]\n",
    "label_col = \"is_promoted\"\n",
    "seed = 42\n",
    "# handle duplicates\n",
    "df = df.drop_duplicates().dropna()\n",
    "df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {},
   "outputs": [],
   "source": [
    "from sklearn.pipeline import Pipeline\n",
    "\n",
    "pipeline = Pipeline([\n",
    "                (\"ohe\", dp.EncoderOHE(col_encode=categorical_cols, drop=False)),\n",
    "                (\"model\", LGBMClassifier(n_estimators=50, random_state=42)),\n",
    "            ])"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Here we do a split on the data, train a LightGBM model using the scikit pipeline we created, and see how this model does on some test data. After this processing, we train the model and we can see that the model does well on false values, getting 97.3% of them correct, but the model does a lot worse on the true values, only identifying approximately a third of the true positives correctly. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {},
   "outputs": [],
   "source": [
    "def conf_matrix(y, pred):\n",
    "    ((tn, fp), (fn, tp)) = metrics.confusion_matrix(y, pred)\n",
    "    ((tnr, fpr), (fnr, tpr)) = metrics.confusion_matrix(y, pred, normalize=\"true\")\n",
    "    return pd.DataFrame(\n",
    "        [\n",
    "            [f\"TP = {tp} ({tpr:1.2%})\", f\"FN = {fn} ({fnr:1.2%})\"],\n",
    "            [f\"FP = {fp} ({fpr:1.2%})\", f\"TN = {tn} ({tnr:1.2%})\"],\n",
    "        ],\n",
    "        index=[\"True\", \"False\"],\n",
    "        columns=[\"Pred 1\", \"Pred 0\"],\n",
    "    )"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "number of errors on test dataset: 281\n",
      "                  Pred 1              Pred 0\n",
      "True   TP = 146 (34.52%)   FN = 277 (65.48%)\n",
      "False     FP = 4 (0.09%)  TN = 4439 (99.91%)\n",
      "              precision    recall  f1-score   support\n",
      "\n",
      "           0       0.94      1.00      0.97      4443\n",
      "           1       0.97      0.35      0.51       423\n",
      "\n",
      "    accuracy                           0.94      4866\n",
      "   macro avg       0.96      0.67      0.74      4866\n",
      "weighted avg       0.94      0.94      0.93      4866\n",
      "\n"
     ]
    }
   ],
   "source": [
    "## Train a model and get accuracy numbers\n",
    "# splitting the dataset\n",
    "np.random.seed(42)\n",
    "x_train, x_test, y_train, y_test = dp.split_data(df, label_col, test_size=0.1)\n",
    "# fitting the pipeline and predicting\n",
    "pipeline.fit(x_train, y_train)\n",
    "pred = pipeline.predict(x_test)\n",
    "\n",
    "\n",
    "print(\"number of errors on test dataset: \" + str(sum(pred != y_test)))\n",
    "print(conf_matrix(y_test, pred))\n",
    "print(classification_report(y_test, pred))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Error Analysis on Baseline Model\n",
    "Now that we have a baseline model to work with, we can see how this model is doing overall on the data and see if there are any cohorts within the data that the model performs worse on. Even if the model has a high accuracy, we want to make sure that accuracy is applicable over different sensitive groups. We use the [Error Analysis Dashboard](https://erroranalysis.ai/) to determine which cohorts of data this model performs worse on. Since the error analysis dashboard is interactive and too large to render on Github, we will include screenshots from our analysis. From these screenshots we can see that if we zoom in on certain cohorts that the model is getting more errors on, that region, department and education are all attributes that are involved in those cohorts. For the purpose of this example, we chose remove some of the other columns like KPIs_met from the error analysis since we want to focus on attributes that may lead to biases rather than more measurable attributes. We will focus on analyzing and mitigating errors within the department and education columns for the rest of the analysis. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "'\\nfrom raiwidgets import ErrorAnalysisDashboard\\n\\nErrorAnalysisDashboard(\\n    dataset=x_test,\\n    true_y=y_test,\\n    features=x_test.columns,\\n    pred_y=pred,\\n    categorical_features=categorical_cols,\\n)\\n'"
      ]
     },
     "execution_count": 14,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "'''\n",
    "from raiwidgets import ErrorAnalysisDashboard\n",
    "\n",
    "ErrorAnalysisDashboard(\n",
    "    dataset=x_test,\n",
    "    true_y=y_test,\n",
    "    features=x_test.columns,\n",
    "    pred_y=pred,\n",
    "    categorical_features=categorical_cols,\n",
    ")\n",
    "'''"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Data Balance Analysis\n",
    "First we can take a look at the feature balance measures. These measures indicate the difference in the label column amongst different feature values. For example the first row here indicates if people with the \"Masters & above\" education has a different proportion of people receiving the promoted outcome than those that have a Bachelor's. Lower values of these measures indicates that the amounts of people with class A vs versus those with class B with a label of 1 is similar. The t-test value can also tell us if the difference we see is statistically significant."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>ClassA</th>\n",
       "      <th>ClassB</th>\n",
       "      <th>FeatureName</th>\n",
       "      <th>dp</th>\n",
       "      <th>pmi</th>\n",
       "      <th>sdc</th>\n",
       "      <th>ji</th>\n",
       "      <th>krc</th>\n",
       "      <th>llr</th>\n",
       "      <th>t_test</th>\n",
       "      <th>ttest_pvalue</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Bachelor's</td>\n",
       "      <td>Master's &amp; above</td>\n",
       "      <td>education</td>\n",
       "      <td>-0.016964</td>\n",
       "      <td>-0.188396</td>\n",
       "      <td>-0.004202</td>\n",
       "      <td>-0.004908</td>\n",
       "      <td>-4.957166</td>\n",
       "      <td>0.625158</td>\n",
       "      <td>-0.260358</td>\n",
       "      <td>0.409471</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Bachelor's</td>\n",
       "      <td>Below Secondary</td>\n",
       "      <td>education</td>\n",
       "      <td>0.001259</td>\n",
       "      <td>0.015504</td>\n",
       "      <td>0.064587</td>\n",
       "      <td>0.070209</td>\n",
       "      <td>-31.829677</td>\n",
       "      <td>4.281150</td>\n",
       "      <td>-2.863668</td>\n",
       "      <td>0.051688</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Master's &amp; above</td>\n",
       "      <td>Below Secondary</td>\n",
       "      <td>education</td>\n",
       "      <td>0.018223</td>\n",
       "      <td>0.203900</td>\n",
       "      <td>0.068788</td>\n",
       "      <td>0.075116</td>\n",
       "      <td>-26.872510</td>\n",
       "      <td>3.655992</td>\n",
       "      <td>-2.603310</td>\n",
       "      <td>0.060643</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>sourcing</td>\n",
       "      <td>other</td>\n",
       "      <td>recruitment_channel</td>\n",
       "      <td>0.003066</td>\n",
       "      <td>0.035499</td>\n",
       "      <td>-0.000410</td>\n",
       "      <td>-0.000477</td>\n",
       "      <td>1.576541</td>\n",
       "      <td>-0.234355</td>\n",
       "      <td>0.084912</td>\n",
       "      <td>0.470033</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>sourcing</td>\n",
       "      <td>referred</td>\n",
       "      <td>recruitment_channel</td>\n",
       "      <td>-0.035991</td>\n",
       "      <td>-0.343135</td>\n",
       "      <td>0.048845</td>\n",
       "      <td>0.053990</td>\n",
       "      <td>-18.710400</td>\n",
       "      <td>2.661363</td>\n",
       "      <td>-1.731014</td>\n",
       "      <td>0.112794</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "             ClassA            ClassB          FeatureName        dp  \\\n",
       "0        Bachelor's  Master's & above            education -0.016964   \n",
       "1        Bachelor's   Below Secondary            education  0.001259   \n",
       "2  Master's & above   Below Secondary            education  0.018223   \n",
       "0          sourcing             other  recruitment_channel  0.003066   \n",
       "1          sourcing          referred  recruitment_channel -0.035991   \n",
       "\n",
       "        pmi       sdc        ji        krc       llr    t_test  ttest_pvalue  \n",
       "0 -0.188396 -0.004202 -0.004908  -4.957166  0.625158 -0.260358      0.409471  \n",
       "1  0.015504  0.064587  0.070209 -31.829677  4.281150 -2.863668      0.051688  \n",
       "2  0.203900  0.068788  0.075116 -26.872510  3.655992 -2.603310      0.060643  \n",
       "0  0.035499 -0.000410 -0.000477   1.576541 -0.234355  0.084912      0.470033  \n",
       "1 -0.343135  0.048845  0.053990 -18.710400  2.661363 -1.731014      0.112794  "
      ]
     },
     "execution_count": 15,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "feature_measures = FeatureBalanceMeasure(cols_of_interest, label_col)\n",
    "\n",
    "train_df = x_train.copy()\n",
    "train_df[label_col] = y_train\n",
    "\n",
    "feat_measures1 = feature_measures.measures(train_df)\n",
    "feat_measures1.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "data": {
      "image/png": "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",
      "text/plain": [
       "<Figure size 432x288 with 2 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    }
   ],
   "source": [
    "%matplotlib inline \n",
    "educations = train_df[\"education\"].unique()\n",
    "education_dp_values = feat_measures1[feat_measures1[\"FeatureName\"] == \"education\"][\n",
    "    [\"ClassA\", \"ClassB\", \"pmi\"]\n",
    "]\n",
    "education_dp_array = np.zeros((len(educations), len(educations)))\n",
    "\n",
    "for idx, row in education_dp_values.iterrows():\n",
    "    class_a = row[0]\n",
    "    class_b = row[1]\n",
    "    dp_value = row[2]\n",
    "    i, j = np.where(educations == class_a)[0][0], np.where(educations == class_b)\n",
    "    dp_value = round(dp_value, 2)\n",
    "    education_dp_array[i, j] = dp_value\n",
    "    education_dp_array[j, i] = -1 * dp_value\n",
    "\n",
    "colormap = \"RdBu\"\n",
    "dp_min, dp_max = -1.0, 1.0\n",
    "\n",
    "fig, ax = plt.subplots()\n",
    "im = ax.imshow(education_dp_array, vmin=dp_min, vmax=dp_max, cmap=colormap)\n",
    "\n",
    "cbar = ax.figure.colorbar(im, ax=ax)\n",
    "cbar.ax.set_ylabel(\"Point Mutual Info\", rotation=-90, va=\"bottom\")\n",
    "\n",
    "ax.set_xticks(np.arange(len(educations)))\n",
    "ax.set_yticks(np.arange(len(educations)))\n",
    "ax.set_xticklabels(educations)\n",
    "ax.set_yticklabels(educations)\n",
    "\n",
    "plt.setp(ax.get_xticklabels(), rotation=45, ha=\"right\", rotation_mode=\"anchor\")\n",
    "\n",
    "for i in range(len(educations)):\n",
    "    for j in range(len(educations)):\n",
    "        text = ax.text(\n",
    "            j, i, education_dp_array[i, j], ha=\"center\", va=\"center\", color=\"k\"\n",
    "        )\n",
    "\n",
    "ax.set_title(\"PMI of education in HR Dataset\")\n",
    "fig.tight_layout()\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Next we can take a look at the distribution balance measures. These measures each of the columns of interest that we selected to the uniform distribution of those values. Values that are closer to zero indicate that the difference between the actual distribution of the data and the uniform distribution of values. We find that these values pretty far from zero, so they don't align to a uniform distribution well before we make any modifications to the original data. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>FeatureName</th>\n",
       "      <th>kl_divergence</th>\n",
       "      <th>js_dist</th>\n",
       "      <th>wasserstein_dist</th>\n",
       "      <th>inf_norm_dist</th>\n",
       "      <th>total_variation_dist</th>\n",
       "      <th>chi_sq_p_value</th>\n",
       "      <th>chi_sq_stat</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>education</td>\n",
       "      <td>0.433445</td>\n",
       "      <td>0.358342</td>\n",
       "      <td>0.235238</td>\n",
       "      <td>0.352857</td>\n",
       "      <td>0.352857</td>\n",
       "      <td>0.0</td>\n",
       "      <td>30235.985340</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>recruitment_channel</td>\n",
       "      <td>0.326923</td>\n",
       "      <td>0.315666</td>\n",
       "      <td>0.208217</td>\n",
       "      <td>0.312326</td>\n",
       "      <td>0.312326</td>\n",
       "      <td>0.0</td>\n",
       "      <td>20356.403343</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "           FeatureName  kl_divergence   js_dist  wasserstein_dist  \\\n",
       "0            education       0.433445  0.358342          0.235238   \n",
       "1  recruitment_channel       0.326923  0.315666          0.208217   \n",
       "\n",
       "   inf_norm_dist  total_variation_dist  chi_sq_p_value   chi_sq_stat  \n",
       "0       0.352857              0.352857             0.0  30235.985340  \n",
       "1       0.312326              0.312326             0.0  20356.403343  "
      ]
     },
     "execution_count": 17,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "dist_measures = DistributionBalanceMeasure(cols_of_interest)\n",
    "dist_measures1 = dist_measures.measures(train_df)\n",
    "dist_measures1"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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FFgCvKeqi0TkMRHpGtvUGWOKK1UNPmfkUOX1XJDp06cDRSPAMCVLiQowAFT1E1VtrKoNVPVJP22Qqk6IsGwHK70wxhyO1atX06RJE66//nqaN2/O448/Tvv27WnZsiWPPPJIcLm3336bli1b0qpVK6677jrAPcisT58+nHLKKfTv35/BgwdneYR68+bNg088rVChAgADBgxg2rRppKSk8NxzzzFy5EguvfRSOnXqRN26dRk2bBhDhw6ldevWnHrqqcFnmvzyyy906dKFtm3bcsYZZ7B06dJgGu68805OP/106tevHxx2PPx7IsnMzKRfv340b96cli1b8uKLLwbnvfjii7Rp04YWLVoEv2vmzJmcdtpptG7dmtNPP51ly5YBrtTh8ssvp0uXLjRq1Cj4qPrAdg8cOJBWrVpx6qmnsmHDBgA2bdrEFVdcQfv27Wnfvj3ff//9Yf6C5kiVuADDGGMKyvLly7n99tt57rnnSEtLY+bMmaSmpjJ79my+/fZbFi1axBNPPMGXX37JvHnzeP7554OfXbduHdOnT2fo0KH5+q4hQ4ZwxhlnkJqayj333AO4R7r/97//5aeffmLgwIGUK1eOuXPnctppp/H2228D0Lt3b1588UVmz57Ns88+y+233x5c52+//cZ3333HpEmTGDBgQI7fE+6VV15h9erVpKamMn/+fK699trgvKpVqzJnzhxuu+22YNDUtGlTpk2bxty5c3nsscf4+9//Hlw+NTWVd999lwULFvDuu++ydq3rCLh7925OPfVU5s2bx5lnnsmrr74KwF133cU999zDTz/9xAcffECvXr3ylX8m+kpaI09TxEyZMoW77rqLzMxMevXqFTzJBYwYMYLhw4cTFxdHhQoVeOWVV2jWrBmrV6/mpJNOokmTJgCceuqpjBgxAoCxY8fy1FNPISLUrFmTd955h6pVq/Lwww/z0UcfUapUKapXr87IkSOpWbNmgW+zKT7q1KnDqaeeSr9+/fjss89o3bo1ALt27WL58uXMmzeP7t27U7VqVQCqVKkS/Gz37t2Ji4s7ou8/++yzqVixIhUrVqRSpUpcfPHFALRo0YL58+eza9cupk+fTvfu3YOf2bdvX/D1pZdeSqlSpWjWrFmwhCA/Pv/8c/r06UN8fHy27br88ssBaNu2Lf/9738B2L59OzfccAPLly9HRIJPkgX3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",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    }
   ],
   "source": [
    "%matplotlib inline \n",
    "measures_of_interest = [\n",
    "    \"kl_divergence\",\n",
    "    \"js_dist\",\n",
    "    \"inf_norm_dist\",\n",
    "    \"total_variation_dist\",\n",
    "    \"wasserstein_dist\",\n",
    "]\n",
    "education_measures = dist_measures1[dist_measures1[\"FeatureName\"] == \"education\"].iloc[\n",
    "    0\n",
    "]\n",
    "recruitment_measures = dist_measures1[\n",
    "    dist_measures1[\"FeatureName\"] == \"recruitment_channel\"\n",
    "].iloc[0]\n",
    "education_array = [\n",
    "    round(education_measures[measure], 4) for measure in measures_of_interest\n",
    "]\n",
    "recruitment_array = [\n",
    "    round(recruitment_measures[measure], 4) for measure in measures_of_interest\n",
    "]\n",
    "\n",
    "x = np.arange(len(measures_of_interest))\n",
    "width = 0.35\n",
    "\n",
    "fig, ax = plt.subplots()\n",
    "rects1 = ax.bar(x - width / 2, education_array, width, label=\"education\")\n",
    "rects2 = ax.bar(x + width / 2, recruitment_array, width, label=\"recruitment_channel\")\n",
    "\n",
    "ax.set_xlabel(\"Measure\")\n",
    "ax.set_ylabel(\"Value\")\n",
    "ax.set_title(\n",
    "    \"Distribution Balance Measures of Education and Recruitment Channel in Adult Dataset\"\n",
    ")\n",
    "ax.set_xticks(x)\n",
    "ax.set_xticklabels(measures_of_interest)\n",
    "ax.legend()\n",
    "\n",
    "plt.setp(ax.get_xticklabels(), rotation=20, ha=\"right\", rotation_mode=\"default\")\n",
    "\n",
    "\n",
    "def autolabel(rects):\n",
    "    for rect in rects:\n",
    "        height = rect.get_height()\n",
    "        ax.annotate(\n",
    "            \"{}\".format(height),\n",
    "            xy=(rect.get_x() + rect.get_width() / 2, height),\n",
    "            xytext=(0, 1),  # 1 point vertical offset\n",
    "            textcoords=\"offset points\",\n",
    "            ha=\"center\",\n",
    "            va=\"bottom\",\n",
    "        )\n",
    "\n",
    "\n",
    "autolabel(rects1)\n",
    "autolabel(rects2)\n",
    "\n",
    "fig.tight_layout()\n",
    "\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "We can also look at aggregate balance measures which indicate a notion of overall inequality in the data. We can see that the Atkinson Index is 0.79. This means that in order to create a perfectly balanced dataset over these measures we would need to forgo 79.9% of the data. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 19,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>theil_l_index</th>\n",
       "      <th>theil_t_index</th>\n",
       "      <th>atkinson_index</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>1.60865</td>\n",
       "      <td>0.760961</td>\n",
       "      <td>0.799842</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "   theil_l_index  theil_t_index  atkinson_index\n",
       "0        1.60865       0.760961        0.799842"
      ]
     },
     "execution_count": 19,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "agg_measures = AggregateBalanceMeasure(cols_of_interest)\n",
    "agg_measures1 = agg_measures.measures(train_df)\n",
    "agg_measures1"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Error Mitigation: Rebalancing dataset\n",
    "In order to rebalance the data we can choose from three different methods of under or oversampling. These are SMOTE, Tomek and SMOTE-Tomek. SMOTE is a oversampling technique for the less represented class. Tomek is an undersampling technique that would be applied to the more represented class. Smote-Tomek is when both of these methods are applied in conjunction on the dataset. In this example, we will choose to use the SMOTE sampling technique on the columns of interest. The Rebalance function can only be applied on one column at a time so in order to apply this rebalancing technique on a cohort of two sensitive columns instead of an individual column, we combine these two columns into a single column that can be balanced. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 20,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>employee_id</th>\n",
       "      <th>department</th>\n",
       "      <th>region</th>\n",
       "      <th>gender</th>\n",
       "      <th>no_of_trainings</th>\n",
       "      <th>age</th>\n",
       "      <th>previous_year_rating</th>\n",
       "      <th>length_of_service</th>\n",
       "      <th>KPIs_met &gt;80%</th>\n",
       "      <th>awards_won?</th>\n",
       "      <th>avg_training_score</th>\n",
       "      <th>is_promoted</th>\n",
       "      <th>education_recruitment_cohort</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>12551</th>\n",
       "      <td>37468</td>\n",
       "      <td>7</td>\n",
       "      <td>11</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>57</td>\n",
       "      <td>2.0</td>\n",
       "      <td>26</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>54</td>\n",
       "      <td>0</td>\n",
       "      <td>0 * 2</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>29225</th>\n",
       "      <td>42421</td>\n",
       "      <td>5</td>\n",
       "      <td>4</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>42</td>\n",
       "      <td>3.0</td>\n",
       "      <td>6</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>75</td>\n",
       "      <td>0</td>\n",
       "      <td>2 * 0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>53838</th>\n",
       "      <td>75216</td>\n",
       "      <td>7</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>39</td>\n",
       "      <td>3.0</td>\n",
       "      <td>12</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>51</td>\n",
       "      <td>0</td>\n",
       "      <td>0 * 2</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>13948</th>\n",
       "      <td>12975</td>\n",
       "      <td>5</td>\n",
       "      <td>14</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>57</td>\n",
       "      <td>3.0</td>\n",
       "      <td>7</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>69</td>\n",
       "      <td>0</td>\n",
       "      <td>0 * 0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>26298</th>\n",
       "      <td>6524</td>\n",
       "      <td>7</td>\n",
       "      <td>25</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>35</td>\n",
       "      <td>4.0</td>\n",
       "      <td>7</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>49</td>\n",
       "      <td>0</td>\n",
       "      <td>0 * 2</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>38940</th>\n",
       "      <td>51399</td>\n",
       "      <td>7</td>\n",
       "      <td>31</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>52</td>\n",
       "      <td>3.0</td>\n",
       "      <td>9</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>46</td>\n",
       "      <td>0</td>\n",
       "      <td>0 * 0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8800</th>\n",
       "      <td>30117</td>\n",
       "      <td>5</td>\n",
       "      <td>11</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>56</td>\n",
       "      <td>3.0</td>\n",
       "      <td>29</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>90</td>\n",
       "      <td>1</td>\n",
       "      <td>2 * 0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>12235</th>\n",
       "      <td>50057</td>\n",
       "      <td>8</td>\n",
       "      <td>7</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>36</td>\n",
       "      <td>1.0</td>\n",
       "      <td>10</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>82</td>\n",
       "      <td>0</td>\n",
       "      <td>0 * 0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>34219</th>\n",
       "      <td>22338</td>\n",
       "      <td>4</td>\n",
       "      <td>14</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>33</td>\n",
       "      <td>3.0</td>\n",
       "      <td>2</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>61</td>\n",
       "      <td>0</td>\n",
       "      <td>0 * 0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19296</th>\n",
       "      <td>50970</td>\n",
       "      <td>7</td>\n",
       "      <td>11</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>45</td>\n",
       "      <td>3.0</td>\n",
       "      <td>13</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>52</td>\n",
       "      <td>0</td>\n",
       "      <td>0 * 1</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>43794 rows × 13 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "       employee_id  department  region  gender  no_of_trainings  age  \\\n",
       "12551        37468           7      11       1                1   57   \n",
       "29225        42421           5       4       0                1   42   \n",
       "53838        75216           7       1       1                1   39   \n",
       "13948        12975           5      14       1                1   57   \n",
       "26298         6524           7      25       1                1   35   \n",
       "...            ...         ...     ...     ...              ...  ...   \n",
       "38940        51399           7      31       1                1   52   \n",
       "8800         30117           5      11       1                1   56   \n",
       "12235        50057           8       7       1                1   36   \n",
       "34219        22338           4      14       1                1   33   \n",
       "19296        50970           7      11       1                1   45   \n",
       "\n",
       "       previous_year_rating  length_of_service  KPIs_met >80%  awards_won?  \\\n",
       "12551                   2.0                 26              0            0   \n",
       "29225                   3.0                  6              0            0   \n",
       "53838                   3.0                 12              0            0   \n",
       "13948                   3.0                  7              0            0   \n",
       "26298                   4.0                  7              0            0   \n",
       "...                     ...                ...            ...          ...   \n",
       "38940                   3.0                  9              0            0   \n",
       "8800                    3.0                 29              1            0   \n",
       "12235                   1.0                 10              0            0   \n",
       "34219                   3.0                  2              0            0   \n",
       "19296                   3.0                 13              1            0   \n",
       "\n",
       "       avg_training_score  is_promoted education_recruitment_cohort  \n",
       "12551                  54            0                        0 * 2  \n",
       "29225                  75            0                        2 * 0  \n",
       "53838                  51            0                        0 * 2  \n",
       "13948                  69            0                        0 * 0  \n",
       "26298                  49            0                        0 * 2  \n",
       "...                   ...          ...                          ...  \n",
       "38940                  46            0                        0 * 0  \n",
       "8800                   90            1                        2 * 0  \n",
       "12235                  82            0                        0 * 0  \n",
       "34219                  61            0                        0 * 0  \n",
       "19296                  52            0                        0 * 1  \n",
       "\n",
       "[43794 rows x 13 columns]"
      ]
     },
     "execution_count": 20,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "def combine_cols(df):\n",
    "    return str(df[0]) + \" * \" + str(df[1])\n",
    "\n",
    "encoder = dp.EncoderOrdinal(col_encode=categorical_cols)\n",
    "\n",
    "train_df2 = train_df.copy()\n",
    "encoder.fit(train_df2)\n",
    "train_df2 = encoder.transform(train_df2)\n",
    "\n",
    "train_df2[\"education_recruitment_cohort\"] = train_df2[ [\"education\", \"recruitment_channel\"] ].apply(combine_cols, axis=1)\n",
    "train_df2 = train_df2.drop([\"education\", \"recruitment_channel\"], axis=1)\n",
    "train_df2"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 21,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "0 * 0    16581\n",
       "0 * 2    12755\n",
       "2 * 0     7509\n",
       "2 * 2     5623\n",
       "0 * 1      715\n",
       "1 * 0      222\n",
       "2 * 1      189\n",
       "1 * 2      184\n",
       "1 * 1       16\n",
       "Name: education_recruitment_cohort, dtype: int64"
      ]
     },
     "execution_count": 21,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "train_df2['education_recruitment_cohort'].value_counts()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 22,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "No columns specified for imputation. These columns have been automatically identified:\n",
      "[]\n",
      "Running oversampling...\n",
      "...finished\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "0 * 2    16581\n",
       "2 * 0    16581\n",
       "0 * 0    16581\n",
       "2 * 2    16581\n",
       "1 * 2    16581\n",
       "1 * 0    16581\n",
       "0 * 1    16581\n",
       "2 * 1    16581\n",
       "1 * 1    16581\n",
       "Name: education_recruitment_cohort, dtype: int64"
      ]
     },
     "execution_count": 22,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "rebalance = dp.Rebalance(\n",
    "\t\t\t\tdf=train_df2,\n",
    "\t\t\t\trebalance_col='education_recruitment_cohort',\n",
    "\t\t\t\tk_neighbors=4\n",
    "\t\t\t)\n",
    "smote_df = rebalance.fit_resample()\n",
    "smote_df['education_recruitment_cohort'].value_counts()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 23,
   "metadata": {},
   "outputs": [],
   "source": [
    "smote_df['education'] = smote_df['education_recruitment_cohort'].apply(lambda x: int(x.split(\" * \")[0]))\n",
    "smote_df['recruitment_channel'] = smote_df['education_recruitment_cohort'].apply(lambda x: int(x.split(\" * \")[1]))\n",
    "smote_df = smote_df.drop([\"education_recruitment_cohort\"], axis=1)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 24,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>employee_id</th>\n",
       "      <th>department</th>\n",
       "      <th>region</th>\n",
       "      <th>gender</th>\n",
       "      <th>no_of_trainings</th>\n",
       "      <th>age</th>\n",
       "      <th>previous_year_rating</th>\n",
       "      <th>length_of_service</th>\n",
       "      <th>KPIs_met &gt;80%</th>\n",
       "      <th>awards_won?</th>\n",
       "      <th>avg_training_score</th>\n",
       "      <th>is_promoted</th>\n",
       "      <th>education</th>\n",
       "      <th>recruitment_channel</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>37468</td>\n",
       "      <td>Sales &amp; Marketing</td>\n",
       "      <td>region_2</td>\n",
       "      <td>m</td>\n",
       "      <td>1</td>\n",
       "      <td>57</td>\n",
       "      <td>2.000000</td>\n",
       "      <td>26</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>54</td>\n",
       "      <td>0</td>\n",
       "      <td>Bachelor's</td>\n",
       "      <td>sourcing</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>42421</td>\n",
       "      <td>Procurement</td>\n",
       "      <td>region_13</td>\n",
       "      <td>f</td>\n",
       "      <td>1</td>\n",
       "      <td>42</td>\n",
       "      <td>3.000000</td>\n",
       "      <td>6</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>75</td>\n",
       "      <td>0</td>\n",
       "      <td>Master's &amp; above</td>\n",
       "      <td>other</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>75216</td>\n",
       "      <td>Sales &amp; Marketing</td>\n",
       "      <td>region_10</td>\n",
       "      <td>m</td>\n",
       "      <td>1</td>\n",
       "      <td>39</td>\n",
       "      <td>3.000000</td>\n",
       "      <td>12</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>51</td>\n",
       "      <td>0</td>\n",
       "      <td>Bachelor's</td>\n",
       "      <td>sourcing</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>12975</td>\n",
       "      <td>Procurement</td>\n",
       "      <td>region_22</td>\n",
       "      <td>m</td>\n",
       "      <td>1</td>\n",
       "      <td>57</td>\n",
       "      <td>3.000000</td>\n",
       "      <td>7</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>69</td>\n",
       "      <td>0</td>\n",
       "      <td>Bachelor's</td>\n",
       "      <td>other</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>6524</td>\n",
       "      <td>Sales &amp; Marketing</td>\n",
       "      <td>region_32</td>\n",
       "      <td>m</td>\n",
       "      <td>1</td>\n",
       "      <td>35</td>\n",
       "      <td>4.000000</td>\n",
       "      <td>7</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>49</td>\n",
       "      <td>0</td>\n",
       "      <td>Bachelor's</td>\n",
       "      <td>sourcing</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>149224</th>\n",
       "      <td>19927</td>\n",
       "      <td>Sales &amp; Marketing</td>\n",
       "      <td>region_25</td>\n",
       "      <td>m</td>\n",
       "      <td>1</td>\n",
       "      <td>41</td>\n",
       "      <td>3.000000</td>\n",
       "      <td>11</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>45</td>\n",
       "      <td>0</td>\n",
       "      <td>Master's &amp; above</td>\n",
       "      <td>sourcing</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>149225</th>\n",
       "      <td>50400</td>\n",
       "      <td>HR</td>\n",
       "      <td>region_17</td>\n",
       "      <td>f</td>\n",
       "      <td>1</td>\n",
       "      <td>36</td>\n",
       "      <td>4.326005</td>\n",
       "      <td>7</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>61</td>\n",
       "      <td>0</td>\n",
       "      <td>Master's &amp; above</td>\n",
       "      <td>sourcing</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>149226</th>\n",
       "      <td>73625</td>\n",
       "      <td>Operations</td>\n",
       "      <td>region_13</td>\n",
       "      <td>m</td>\n",
       "      <td>1</td>\n",
       "      <td>40</td>\n",
       "      <td>3.000000</td>\n",
       "      <td>13</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>72</td>\n",
       "      <td>0</td>\n",
       "      <td>Master's &amp; above</td>\n",
       "      <td>sourcing</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>149227</th>\n",
       "      <td>73791</td>\n",
       "      <td>Operations</td>\n",
       "      <td>region_17</td>\n",
       "      <td>m</td>\n",
       "      <td>1</td>\n",
       "      <td>41</td>\n",
       "      <td>4.379261</td>\n",
       "      <td>10</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>62</td>\n",
       "      <td>0</td>\n",
       "      <td>Master's &amp; above</td>\n",
       "      <td>sourcing</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>149228</th>\n",
       "      <td>9161</td>\n",
       "      <td>Sales &amp; Marketing</td>\n",
       "      <td>region_2</td>\n",
       "      <td>m</td>\n",
       "      <td>1</td>\n",
       "      <td>38</td>\n",
       "      <td>3.134218</td>\n",
       "      <td>8</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>79</td>\n",
       "      <td>0</td>\n",
       "      <td>Master's &amp; above</td>\n",
       "      <td>sourcing</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>149229 rows × 14 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "        employee_id         department     region gender  no_of_trainings  \\\n",
       "0             37468  Sales & Marketing   region_2      m                1   \n",
       "1             42421        Procurement  region_13      f                1   \n",
       "2             75216  Sales & Marketing  region_10      m                1   \n",
       "3             12975        Procurement  region_22      m                1   \n",
       "4              6524  Sales & Marketing  region_32      m                1   \n",
       "...             ...                ...        ...    ...              ...   \n",
       "149224        19927  Sales & Marketing  region_25      m                1   \n",
       "149225        50400                 HR  region_17      f                1   \n",
       "149226        73625         Operations  region_13      m                1   \n",
       "149227        73791         Operations  region_17      m                1   \n",
       "149228         9161  Sales & Marketing   region_2      m                1   \n",
       "\n",
       "        age  previous_year_rating  length_of_service  KPIs_met >80%  \\\n",
       "0        57              2.000000                 26              0   \n",
       "1        42              3.000000                  6              0   \n",
       "2        39              3.000000                 12              0   \n",
       "3        57              3.000000                  7              0   \n",
       "4        35              4.000000                  7              0   \n",
       "...     ...                   ...                ...            ...   \n",
       "149224   41              3.000000                 11              0   \n",
       "149225   36              4.326005                  7              0   \n",
       "149226   40              3.000000                 13              0   \n",
       "149227   41              4.379261                 10              0   \n",
       "149228   38              3.134218                  8              0   \n",
       "\n",
       "        awards_won?  avg_training_score  is_promoted         education  \\\n",
       "0                 0                  54            0        Bachelor's   \n",
       "1                 0                  75            0  Master's & above   \n",
       "2                 0                  51            0        Bachelor's   \n",
       "3                 0                  69            0        Bachelor's   \n",
       "4                 0                  49            0        Bachelor's   \n",
       "...             ...                 ...          ...               ...   \n",
       "149224            0                  45            0  Master's & above   \n",
       "149225            0                  61            0  Master's & above   \n",
       "149226            0                  72            0  Master's & above   \n",
       "149227            0                  62            0  Master's & above   \n",
       "149228            0                  79            0  Master's & above   \n",
       "\n",
       "       recruitment_channel  \n",
       "0                 sourcing  \n",
       "1                    other  \n",
       "2                 sourcing  \n",
       "3                    other  \n",
       "4                 sourcing  \n",
       "...                    ...  \n",
       "149224            sourcing  \n",
       "149225            sourcing  \n",
       "149226            sourcing  \n",
       "149227            sourcing  \n",
       "149228            sourcing  \n",
       "\n",
       "[149229 rows x 14 columns]"
      ]
     },
     "execution_count": 24,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "smote_df = encoder.inverse_transform(smote_df)\n",
    "smote_df"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 25,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "43794\n",
      "149229\n"
     ]
    }
   ],
   "source": [
    "print(x_train.shape[0])\n",
    "print(smote_df.shape[0])"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "After applying the SMOTE Rebalancing mitigation, we get a dataset that is much larger than the original data frame. The SMOTE Method applies oversampling in order to balance the dataset. "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### New Model on Rebalanced Datasets\n",
    "After applying the SMOTE Method on the data, we can then train a new lightGBM model on this newly balanced data and see if there are differences in model performance based on this balancing. We compare the results below and find that the new model trained on the data post rebalancing does a better job predicting true positives than the original model and thus has greater recall and overall precision. So not only does data rebalancing help with making sure a model is less biased, it also helps the model actually fit and be able to predict the data outcomes more accurately. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 26,
   "metadata": {},
   "outputs": [],
   "source": [
    "x_train2 = smote_df.drop(columns=[label_col])\n",
    "y_train2 = smote_df[label_col]\n",
    "\n",
    "pipeline2 = Pipeline([\n",
    "                (\"ohe\", dp.EncoderOHE(col_encode=categorical_cols, drop=False)),\n",
    "                (\"model\", LGBMClassifier(n_estimators=50, random_state=42)),\n",
    "            ])\n",
    "\n",
    "pipeline2.fit(x_train2, y_train2)\n",
    "\n",
    "pred2 = pipeline2.predict(x_test)\n",
    "pred_model1 = pipeline.predict(x_test)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "We compare the number of error that the model 1 that was trained before rebalancing and model 2 that was trained after rebalancing have and we find that overall there are less errors with model 2. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 27,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "\n",
      "\u001b[95m\u001b[1mBEFORE: \u001b[0mnumber of test dataset instances: \u001b[1m\u001b[92m4866\u001b[0m\n",
      "      : number of errors on test dataset: \u001b[1m\u001b[91m281\u001b[0m\n",
      "\n",
      "\u001b[95m\u001b[1mAFTER:  \u001b[0mnumber of test dataset instances: \u001b[1m\u001b[92m4866\u001b[0m\n",
      "     :  number of errors on test dataset: \u001b[1m\u001b[91m311\u001b[0m\n",
      "\n"
     ]
    }
   ],
   "source": [
    "# Compare Results\n",
    "class color:\n",
    "    PURPLE = \"\\033[95m\"\n",
    "    CYAN = \"\\033[96m\"\n",
    "    DARKCYAN = \"\\033[36m\"\n",
    "    BLUE = \"\\033[94m\"\n",
    "    GREEN = \"\\033[92m\"\n",
    "    YELLOW = \"\\033[93m\"\n",
    "    RED = \"\\033[91m\"\n",
    "    BOLD = \"\\033[1m\"\n",
    "    UNDERLINE = \"\\033[4m\"\n",
    "    END = \"\\033[0m\"\n",
    "\n",
    "\n",
    "print(\"\")\n",
    "print(\n",
    "    color.PURPLE\n",
    "    + color.BOLD\n",
    "    + \"BEFORE: \"\n",
    "    + color.END\n",
    "    + \"number of test dataset instances: \"\n",
    "    + color.BOLD\n",
    "    + color.GREEN\n",
    "    + str(len(y_test))\n",
    "    + color.END\n",
    ")\n",
    "print(\n",
    "    \"      : number of errors on test dataset: \"\n",
    "    + color.BOLD\n",
    "    + color.RED\n",
    "    + str(sum(pred_model1 != y_test))\n",
    "    + color.END\n",
    ")\n",
    "print(\"\")\n",
    "print(\n",
    "    color.PURPLE\n",
    "    + color.BOLD\n",
    "    + \"AFTER:  \"\n",
    "    + color.END\n",
    "    + \"number of test dataset instances: \"\n",
    "    + color.BOLD\n",
    "    + color.GREEN\n",
    "    + str(len(y_test))\n",
    "    + color.END\n",
    ")\n",
    "print(\n",
    "    \"     :  number of errors on test dataset: \"\n",
    "    + color.BOLD\n",
    "    + color.RED\n",
    "    + str(sum(pred2 != y_test))\n",
    "    + color.END\n",
    ")\n",
    "print(\"\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 28,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "-----------------------------------------------------------------------\n",
      "\n",
      "\u001b[94m\u001b[1mBEFORE: conf_matrix:\u001b[0m\n",
      "--------------------\n",
      "                  Pred 1              Pred 0\n",
      "True   TP = 146 (34.52%)   FN = 277 (65.48%)\n",
      "False     FP = 4 (0.09%)  TN = 4439 (99.91%)\n",
      "\n",
      "\u001b[94m\u001b[1mAFTER: conf_matrix:\u001b[0m\n",
      "-------------------\n",
      "                  Pred 1              Pred 0\n",
      "True   TP = 114 (26.95%)   FN = 309 (73.05%)\n",
      "False     FP = 2 (0.05%)  TN = 4441 (99.95%)\n",
      "-----------------------------------------------------------------------\n",
      "-----------------------------------------------------------------------\n",
      "\n"
     ]
    }
   ],
   "source": [
    "# compare conf matrices\n",
    "print(\"-----------------------------------------------------------------------\")\n",
    "print(\"\")\n",
    "print(color.BLUE + color.BOLD + \"BEFORE: conf_matrix:\" + color.END)\n",
    "print(\"--------------------\")\n",
    "print(conf_matrix(y_test, pred_model1))\n",
    "print(\"\")\n",
    "print(color.BLUE + color.BOLD + \"AFTER: conf_matrix:\" + color.END)\n",
    "print(\"-------------------\")\n",
    "print(conf_matrix(y_test, pred2))\n",
    "print(\"-----------------------------------------------------------------------\")\n",
    "print(\"-----------------------------------------------------------------------\")\n",
    "print(\"\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 29,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "\u001b[93m\u001b[1mBEFORE: classification_report:\u001b[0m\n",
      "--------------------------------\n",
      "              precision    recall  f1-score   support\n",
      "\n",
      "           0       0.94      1.00      0.97      4443\n",
      "           1       0.97      0.35      0.51       423\n",
      "\n",
      "    accuracy                           0.94      4866\n",
      "   macro avg       0.96      0.67      0.74      4866\n",
      "weighted avg       0.94      0.94      0.93      4866\n",
      "\n",
      "\u001b[93m\u001b[1mAFTER: classification_report:\u001b[0m\n",
      "--------------------------------\n",
      "              precision    recall  f1-score   support\n",
      "\n",
      "           0       0.93      1.00      0.97      4443\n",
      "           1       0.98      0.27      0.42       423\n",
      "\n",
      "    accuracy                           0.94      4866\n",
      "   macro avg       0.96      0.63      0.69      4866\n",
      "weighted avg       0.94      0.94      0.92      4866\n",
      "\n"
     ]
    }
   ],
   "source": [
    "# compare classification report\n",
    "print(color.YELLOW + color.BOLD + \"BEFORE: classification_report:\" + color.END)\n",
    "print(\"--------------------------------\")\n",
    "print(classification_report(y_test, pred_model1))\n",
    "print(color.YELLOW + color.BOLD + \"AFTER: classification_report:\" + color.END)\n",
    "print(\"--------------------------------\")\n",
    "print(classification_report(y_test, pred2))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Even though the model started with fairly high accuracy, we were able to increase other measures of the model's performance "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "We return the dataframe columns to their original form after rebalancing the data. We no longer encode  We want to be able to run the data balance analysis again on the newly rebalanced data and see what the difference is from before applying SMOTE and after."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The feature value measures before rebalancing don't indicate a lot of discrepancy in the outcome within specific features within a class since the values such as demographic parity which is on a 0 to 1 scale are very close to zero. After rebalancing, we still have similarly low values of these measures but there is not a significant improvement since they already started low."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 30,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>ClassA</th>\n",
       "      <th>ClassB</th>\n",
       "      <th>FeatureName</th>\n",
       "      <th>dp</th>\n",
       "      <th>pmi</th>\n",
       "      <th>sdc</th>\n",
       "      <th>ji</th>\n",
       "      <th>krc</th>\n",
       "      <th>llr</th>\n",
       "      <th>t_test</th>\n",
       "      <th>ttest_pvalue</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Bachelor's</td>\n",
       "      <td>Master's &amp; above</td>\n",
       "      <td>education</td>\n",
       "      <td>-0.016964</td>\n",
       "      <td>-0.188396</td>\n",
       "      <td>-0.004202</td>\n",
       "      <td>-0.004908</td>\n",
       "      <td>-4.957166</td>\n",
       "      <td>0.625158</td>\n",
       "      <td>-0.260358</td>\n",
       "      <td>0.409471</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Bachelor's</td>\n",
       "      <td>Below Secondary</td>\n",
       "      <td>education</td>\n",
       "      <td>0.001259</td>\n",
       "      <td>0.015504</td>\n",
       "      <td>0.064587</td>\n",
       "      <td>0.070209</td>\n",
       "      <td>-31.829677</td>\n",
       "      <td>4.281150</td>\n",
       "      <td>-2.863668</td>\n",
       "      <td>0.051688</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Master's &amp; above</td>\n",
       "      <td>Below Secondary</td>\n",
       "      <td>education</td>\n",
       "      <td>0.018223</td>\n",
       "      <td>0.203900</td>\n",
       "      <td>0.068788</td>\n",
       "      <td>0.075116</td>\n",
       "      <td>-26.872510</td>\n",
       "      <td>3.655992</td>\n",
       "      <td>-2.603310</td>\n",
       "      <td>0.060643</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>sourcing</td>\n",
       "      <td>other</td>\n",
       "      <td>recruitment_channel</td>\n",
       "      <td>0.003066</td>\n",
       "      <td>0.035499</td>\n",
       "      <td>-0.000410</td>\n",
       "      <td>-0.000477</td>\n",
       "      <td>1.576541</td>\n",
       "      <td>-0.234355</td>\n",
       "      <td>0.084912</td>\n",
       "      <td>0.470033</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>sourcing</td>\n",
       "      <td>referred</td>\n",
       "      <td>recruitment_channel</td>\n",
       "      <td>-0.035991</td>\n",
       "      <td>-0.343135</td>\n",
       "      <td>0.048845</td>\n",
       "      <td>0.053990</td>\n",
       "      <td>-18.710400</td>\n",
       "      <td>2.661363</td>\n",
       "      <td>-1.731014</td>\n",
       "      <td>0.112794</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "             ClassA            ClassB          FeatureName        dp  \\\n",
       "0        Bachelor's  Master's & above            education -0.016964   \n",
       "1        Bachelor's   Below Secondary            education  0.001259   \n",
       "2  Master's & above   Below Secondary            education  0.018223   \n",
       "0          sourcing             other  recruitment_channel  0.003066   \n",
       "1          sourcing          referred  recruitment_channel -0.035991   \n",
       "\n",
       "        pmi       sdc        ji        krc       llr    t_test  ttest_pvalue  \n",
       "0 -0.188396 -0.004202 -0.004908  -4.957166  0.625158 -0.260358      0.409471  \n",
       "1  0.015504  0.064587  0.070209 -31.829677  4.281150 -2.863668      0.051688  \n",
       "2  0.203900  0.068788  0.075116 -26.872510  3.655992 -2.603310      0.060643  \n",
       "0  0.035499 -0.000410 -0.000477   1.576541 -0.234355  0.084912      0.470033  \n",
       "1 -0.343135  0.048845  0.053990 -18.710400  2.661363 -1.731014      0.112794  "
      ]
     },
     "execution_count": 30,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "feat_measures1.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 31,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>ClassA</th>\n",
       "      <th>ClassB</th>\n",
       "      <th>FeatureName</th>\n",
       "      <th>dp</th>\n",
       "      <th>pmi</th>\n",
       "      <th>sdc</th>\n",
       "      <th>ji</th>\n",
       "      <th>krc</th>\n",
       "      <th>llr</th>\n",
       "      <th>t_test</th>\n",
       "      <th>ttest_pvalue</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Bachelor's</td>\n",
       "      <td>Master's &amp; above</td>\n",
       "      <td>education</td>\n",
       "      <td>0.020505</td>\n",
       "      <td>0.477400</td>\n",
       "      <td>0.018736</td>\n",
       "      <td>0.020331</td>\n",
       "      <td>0.166071</td>\n",
       "      <td>0.477400</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.5</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Bachelor's</td>\n",
       "      <td>Below Secondary</td>\n",
       "      <td>education</td>\n",
       "      <td>0.047102</td>\n",
       "      <td>2.055539</td>\n",
       "      <td>0.043037</td>\n",
       "      <td>0.045560</td>\n",
       "      <td>0.381475</td>\n",
       "      <td>2.055539</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.5</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Master's &amp; above</td>\n",
       "      <td>Below Secondary</td>\n",
       "      <td>education</td>\n",
       "      <td>0.026597</td>\n",
       "      <td>1.578139</td>\n",
       "      <td>0.024302</td>\n",
       "      <td>0.025229</td>\n",
       "      <td>0.215404</td>\n",
       "      <td>1.578139</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.5</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>sourcing</td>\n",
       "      <td>other</td>\n",
       "      <td>recruitment_channel</td>\n",
       "      <td>-0.001005</td>\n",
       "      <td>-0.023586</td>\n",
       "      <td>-0.000918</td>\n",
       "      <td>-0.000994</td>\n",
       "      <td>-0.008141</td>\n",
       "      <td>-0.023586</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.5</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>sourcing</td>\n",
       "      <td>referred</td>\n",
       "      <td>recruitment_channel</td>\n",
       "      <td>0.032909</td>\n",
       "      <td>1.520440</td>\n",
       "      <td>0.030069</td>\n",
       "      <td>0.031538</td>\n",
       "      <td>0.266528</td>\n",
       "      <td>1.520440</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.5</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "             ClassA            ClassB          FeatureName        dp  \\\n",
       "0        Bachelor's  Master's & above            education  0.020505   \n",
       "1        Bachelor's   Below Secondary            education  0.047102   \n",
       "2  Master's & above   Below Secondary            education  0.026597   \n",
       "0          sourcing             other  recruitment_channel -0.001005   \n",
       "1          sourcing          referred  recruitment_channel  0.032909   \n",
       "\n",
       "        pmi       sdc        ji       krc       llr  t_test  ttest_pvalue  \n",
       "0  0.477400  0.018736  0.020331  0.166071  0.477400     0.0           0.5  \n",
       "1  2.055539  0.043037  0.045560  0.381475  2.055539     0.0           0.5  \n",
       "2  1.578139  0.024302  0.025229  0.215404  1.578139     0.0           0.5  \n",
       "0 -0.023586 -0.000918 -0.000994 -0.008141 -0.023586     0.0           0.5  \n",
       "1  1.520440  0.030069  0.031538  0.266528  1.520440     0.0           0.5  "
      ]
     },
     "execution_count": 31,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "feature_measures.measures(smote_df).head()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "When we compare the distribution measures before and after rebalancing, we find that the data is much more evenly distributed (close to the uniform distribution) for the two columns of interest after rebalancing the data using the SMOTE algorithm"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 32,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>FeatureName</th>\n",
       "      <th>kl_divergence</th>\n",
       "      <th>js_dist</th>\n",
       "      <th>wasserstein_dist</th>\n",
       "      <th>inf_norm_dist</th>\n",
       "      <th>total_variation_dist</th>\n",
       "      <th>chi_sq_p_value</th>\n",
       "      <th>chi_sq_stat</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>education</td>\n",
       "      <td>0.433445</td>\n",
       "      <td>0.358342</td>\n",
       "      <td>0.235238</td>\n",
       "      <td>0.352857</td>\n",
       "      <td>0.352857</td>\n",
       "      <td>0.0</td>\n",
       "      <td>30235.985340</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>recruitment_channel</td>\n",
       "      <td>0.326923</td>\n",
       "      <td>0.315666</td>\n",
       "      <td>0.208217</td>\n",
       "      <td>0.312326</td>\n",
       "      <td>0.312326</td>\n",
       "      <td>0.0</td>\n",
       "      <td>20356.403343</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "           FeatureName  kl_divergence   js_dist  wasserstein_dist  \\\n",
       "0            education       0.433445  0.358342          0.235238   \n",
       "1  recruitment_channel       0.326923  0.315666          0.208217   \n",
       "\n",
       "   inf_norm_dist  total_variation_dist  chi_sq_p_value   chi_sq_stat  \n",
       "0       0.352857              0.352857             0.0  30235.985340  \n",
       "1       0.312326              0.312326             0.0  20356.403343  "
      ]
     },
     "execution_count": 32,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# before\n",
    "dist_measures1"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 33,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>FeatureName</th>\n",
       "      <th>kl_divergence</th>\n",
       "      <th>js_dist</th>\n",
       "      <th>wasserstein_dist</th>\n",
       "      <th>inf_norm_dist</th>\n",
       "      <th>total_variation_dist</th>\n",
       "      <th>chi_sq_p_value</th>\n",
       "      <th>chi_sq_stat</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>education</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>recruitment_channel</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>1.0</td>\n",
       "      <td>0.0</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "           FeatureName  kl_divergence  js_dist  wasserstein_dist  \\\n",
       "0            education            0.0      0.0               0.0   \n",
       "1  recruitment_channel            0.0      0.0               0.0   \n",
       "\n",
       "   inf_norm_dist  total_variation_dist  chi_sq_p_value  chi_sq_stat  \n",
       "0            0.0                   0.0             1.0          0.0  \n",
       "1            0.0                   0.0             1.0          0.0  "
      ]
     },
     "execution_count": 33,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# after\n",
    "dist_measures.measures(smote_df)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The Atkinson index which gives us the overall notion of inequality before and after rebalancing shows us that in order to get a perfectly balanced dataset, we no longer need to forgo any of the data."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 34,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>theil_l_index</th>\n",
       "      <th>theil_t_index</th>\n",
       "      <th>atkinson_index</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>1.60865</td>\n",
       "      <td>0.760961</td>\n",
       "      <td>0.799842</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "   theil_l_index  theil_t_index  atkinson_index\n",
       "0        1.60865       0.760961        0.799842"
      ]
     },
     "execution_count": 34,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# before\n",
    "agg_measures1"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 35,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>theil_l_index</th>\n",
       "      <th>theil_t_index</th>\n",
       "      <th>atkinson_index</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "   theil_l_index  theil_t_index  atkinson_index\n",
       "0            0.0            0.0             0.0"
      ]
     },
     "execution_count": 35,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# after\n",
    "agg_measures.measures(smote_df)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "label the top as before and the bottom as after\n",
    "highlight underneath the cohort\n",
    "lower fill (meaning )"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3.9.12 ('rai')",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.9.12"
  },
  "vscode": {
   "interpreter": {
    "hash": "5215fd1cce9b64233b490e6c4e868a314fa8a5a2b064fe0583fd0c29542af034"
   }
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
