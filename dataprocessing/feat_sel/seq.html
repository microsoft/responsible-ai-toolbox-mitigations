<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SeqFeatSelection &mdash; RAI Error Mitigation  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="SeqFeatSelection Example" href="../notebooks/module_tests/feat_sel_sequential.html" />
    <link rel="prev" title="Feature Selection" href="feat_sel.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> RAI Error Mitigation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../databalanceanalysis/databalanceanalysis.html">databalanceanalysis</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../intro.html">dataprocessing</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../intro.html#target-audience">Target Audience</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#structure">Structure</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../intro.html#api">API</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../dataprocessing.html">DataProcessing</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../encoder/encoder.html">Encoders</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="feat_sel.html">Feature Selection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../imputer/imputer.html">Imputers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sampler/sampler.html">Sampling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../scaler/scaler.html">Scalers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../model_utils.html">Model Utils</a></li>
<li class="toctree-l4"><a class="reference internal" href="../toy_data.html">Toy Dataset</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro.html#sklearn-s-pipeline-support">Sklearn’s Pipeline Support</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">RAI Error Mitigation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../intro.html">dataprocessing</a> &raquo;</li>
          <li><a href="../dataprocessing.html">DataProcessing</a> &raquo;</li>
          <li><a href="feat_sel.html">Feature Selection</a> &raquo;</li>
      <li>SeqFeatSelection</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com//microsoft/responsible-ai-toolbox-mitigations/blob/main/docs/dataprocessing/feat_sel/seq.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="seqfeatselection">
<h1>SeqFeatSelection<a class="headerlink" href="#seqfeatselection" title="Permalink to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="dataprocessing.SeqFeatSelection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">dataprocessing.</span></span><span class="sig-name descname"><span class="pre">SeqFeatSelection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">DataFrame</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">X</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">DataFrame</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">DataFrame</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transform_pipe</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_place</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regression</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">estimator</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">BaseEstimator</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_feat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">tuple</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'best'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fixed_cols</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cv</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scoring</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forward</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_json</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">json_summary</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'seq_feat_summary.json'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dataprocessing.SeqFeatSelection" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="feat_sel.html#dataprocessing.FeatureSelection" title="dataprocessing.feat_selection.selector.FeatureSelection"><code class="xref py py-class docutils literal notranslate"><span class="pre">FeatureSelection</span></code></a></p>
<p>Concrete class that uses <code class="docutils literal notranslate"><span class="pre">SequentialFeatureSelector</span></code> over a dataset.
Implements the sequential feature selection method using the``mlextend``
library. This approach uses a classifier and sequentially changes the
set of features used for training the model. There are two ways to
perform this: (i) forward feature selection or (ii) backward feature
selection. The former starts with an empty set of features and tests
the performance of the model when inserting each of the non-selected
features. The feature with the best score in the test set is added to
the selected features. It then restarts the process until the number
of desired features is reached. The backward feature selection is the
opposite: it starts with all the features and removes them one by one.
The feature that has the least impact on the score of the test set is
selected to be removed. This is repeated until the number of remaining
features is the desired number of features.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> – the data frame to be used during the fit method.
This data frame must contain all the features, including the label
column (specified in the <code class="docutils literal notranslate"><span class="pre">label_col</span></code> parameter). This parameter is
mandatory if <code class="docutils literal notranslate"><span class="pre">label_col</span></code> is also provided. The user can also provide
this dataset (along with the <code class="docutils literal notranslate"><span class="pre">label_col</span></code>) when calling the <code class="xref py py-meth docutils literal notranslate"><span class="pre">fit()</span></code>
method. If <code class="docutils literal notranslate"><span class="pre">df</span></code> is provided during the class instantiation, it is not
necessary to provide it again when calling <code class="xref py py-meth docutils literal notranslate"><span class="pre">fit()</span></code>. It is also possible
to use the  <code class="docutils literal notranslate"><span class="pre">X</span></code> and  <code class="docutils literal notranslate"><span class="pre">y</span></code> instead of  <code class="docutils literal notranslate"><span class="pre">df</span></code> and <code class="docutils literal notranslate"><span class="pre">label_col</span></code>, although it is
mandatory to pass the pair or parameters (X,y) or (df, label_col) either
during the class instantiation or during the <code class="xref py py-meth docutils literal notranslate"><span class="pre">fit()</span></code> method;</p></li>
<li><p><strong>label_col</strong> – the name or index of the label column. This parameter is
mandatory if  <code class="docutils literal notranslate"><span class="pre">df</span></code> is provided;</p></li>
<li><p><strong>X</strong> – contains only the features of the original dataset, that
is, does not contain the label column. This is useful if the user has
already separated the features from the label column prior to calling this
class. This parameter is mandatory if  <code class="docutils literal notranslate"><span class="pre">y</span></code> is provided;</p></li>
<li><p><strong>y</strong> – contains only the label column of the original dataset.
This parameter is mandatory if  <code class="docutils literal notranslate"><span class="pre">X</span></code> is provided;</p></li>
<li><p><strong>transform_pipe</strong> – a list of transformations to be used as a pre-processing
pipeline. Each transformation in this list must be a valid subclass of the
current library (<code class="xref py py-class docutils literal notranslate"><span class="pre">EncoderOrdinal</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BasicImputer</span></code>, etc.). Some feature selection
methods require a dataset with no categorical features or with no missing values
(depending on the approach). If no transformations are provided, a set of default
transformations will be used, which depends on the feature selection approach
(subclass dependent);</p></li>
<li><p><strong>in_place</strong> – indicates if the original dataset will be saved internally (df_org)
or not. If True, then the feature selection transformation is saved over the
original dataset. If False, the original dataset is saved separately (default
value);</p></li>
<li><p><strong>regression</strong> – if True and no estimator is provided, then create a default
CatBoostRegressor. If False, a CatBoostClassifier is created instead. This parameter
is ignored if an estimator is provided using the ‘estimator’ parameter;</p></li>
<li><p><strong>estimator</strong> – a sklearn estimator to be used during the sequential
feature selection process. If no estimator is provided, a default classifier or
regressor is used (BASE_CLASSIFIER and BASE_REGRESSOR, respectively);</p></li>
<li><p><strong>n_feat</strong> – <p>the number of features to be selected. Can be an
integer, string, or tuple:</p>
<blockquote>
<div><ul>
<li><p><strong>int</strong>: a number between 1 and df.shape[1] (number of features);</p></li>
<li><p><strong>string:</strong> the only value accepted in this case is the “best” string, which
selects the number of features with the best score using cross-validation;</p></li>
<li><p><strong>tuple:</strong> a tuple with only 2 values: (min, max), where min and max
are the minimum and maximum number of features to be selected. The
number of features selected the number of features that achieved
the best score in the cross-validation and that is between min and max;</p></li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>fixed_cols</strong> – a list of column names or indices that should always be included in the
set of selected features. Note that the number of columns included here must be smaller
than n_feat, otherwise there is nothing for the class to do (that is:
len(fixed_cols) &lt; n_feat);</p></li>
<li><p><strong>cv</strong> – the number of folds used for the cross-validation;</p></li>
<li><p><strong>scoring</strong> – <p>the score used to indicate which set of features is better. The set of valid
values for this parameter depends on the task being solved: regression or classification.
The valid values are:</p>
<blockquote>
<div><ul>
<li><p><strong>Regression:</strong> “neg_mean_squared_error”, “r2”, “neg_median_absolute_error”;</p></li>
<li><p><strong>Classification:</strong> “accuracy”, “f1”, “precision”, “recall”, “roc_auc”.</p></li>
</ul>
</div></blockquote>
<p>If None, “roc_auc” is used for classification tasks, and “r2” is used for regression tasks;</p>
</p></li>
<li><p><strong>forward</strong> – if True, a forward sequential feature selection approach is used.
If False, a backward sequential feature selection approach is used;</p></li>
<li><p><strong>save_json</strong> – if True, the summary json will be saved in the path specified by the
json_summary parameter after calling the fit() method. If False, this json file is
not saved;</p></li>
<li><p><strong>json_summary</strong> – the path where the summary with the results obtained by the feature
selection process should be saved. This summary is saved after the fit() method is
called. Note that this summary is only saved if save_json is set to True;</p></li>
<li><p><strong>n_jobs</strong> – the number of workers used to run the sequential feature selection method;</p></li>
<li><p><strong>verbose</strong> – indicates whether internal messages should be printed or not.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="dataprocessing.SeqFeatSelection.get_summary">
<span class="sig-name descname"><span class="pre">get_summary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dataprocessing.SeqFeatSelection.get_summary" title="Permalink to this definition"></a></dt>
<dd><p>Public method that returns the summary generated by the
SequentialFeatureSelector class. This summary is a dictionary
where each key represents a different run, which is associated
with a secondary dictionary with all the relevant data regarding
that particular run.</p>
</dd></dl>

</dd></dl>

<p class="rubric">Class Diagram</p>
<div class="graphviz"><img src="../../_images/inheritance-c91bf558223728deb819c2a92cdea2643d269510.png" alt="Inheritance diagram of dataprocessing.SeqFeatSelection" usemap="#inheritancefce55d7f88" class="inheritance graphviz" /></div>
<map id="inheritancefce55d7f88" name="inheritancefce55d7f88">
<area shape="rect" id="node2" href="../dataprocessing.html#dataprocessing.DataProcessing" target="_top" title="Base class for all classes present in the dataprocessing module" alt="" coords="125,5,248,31"/>
<area shape="rect" id="node3" href="feat_sel.html#dataprocessing.FeatureSelection" target="_top" title="Base class for all feature selection subclasses. Implements basic" alt="" coords="296,5,427,31"/>
<area shape="rect" id="node4" href="#dataprocessing.SeqFeatSelection" target="_top" title="Concrete class that uses ``SequentialFeatureSelector`` over a dataset." alt="" coords="475,5,609,31"/>
</map><section id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this heading"></a></h2>
<div class="toctree-wrapper compound">
</div>
<div class="sphx-glr-thumbcontainer">
  <div class="figure align-center">
    <img alt="thumbnail" src="../../_static/no_image.png" />
    <p class="caption">
      <span class="caption-text">
        <a class="reference internal" href="../notebooks/module_tests/feat_sel_sequential.html">
          <span class="std std-ref">SeqFeatSelection Example</span>
        </a>
      </span>
    </p>
  </div>
</div>
<div class="sphx-glr-clear"></div></section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="feat_sel.html" class="btn btn-neutral float-left" title="Feature Selection" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../notebooks/module_tests/feat_sel_sequential.html" class="btn btn-neutral float-right" title="SeqFeatSelection Example" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Microsoft.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>