<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cohort &mdash; Responsible AI Mitigations  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Tutorials" href="module_tests.html" />
    <link rel="prev" title="DataBalanceAnalysis" href="../databalanceanalysis/intro.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Responsible AI Mitigations
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install_guide.html">Installation guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integration_to_libs.html">How this library works with the Responsible AI Toolbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery.html">Gallery</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Modules</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../dataprocessing/intro.html">DataProcessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../databalanceanalysis/intro.html">DataBalanceAnalysis</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Cohort</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#api">API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cohort.html">Cohort</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="module_tests.html">Tutorials</a></li>
<li class="toctree-l3"><a class="reference internal" href="case_studies.html">Cohort Case Studies</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../utils/utils.html">Utils</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Responsible AI Mitigations</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Cohort</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com//microsoft/responsible-ai-toolbox-mitigations/blob/main/docs/cohort/intro.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="cohort">
<span id="id1"></span><h1>Cohort<a class="headerlink" href="#cohort" title="Permalink to this heading"></a></h1>
<p>This module provides the necessary tools for users to create and manage different cohorts throughout
their data processing and model training pipeline. In scenarios where a dataset has cohorts with very
different distributions for certain features, applying a mitigation over the entire dataset might only
make these differences worse. In these cases, applying a mitigation over each cohort separately is
more advantageous than applying it over the whole dataset. Check out <a class="reference internal" href="../index.html#target-mitigation"><span class="std std-ref">this example</span></a>
for a more in-depth analysis of this problem. The classes available in this module are:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="cohort_definition.html#cohort-def"><span class="std std-ref">cohort.CohortDefinition</span></a>: allows the creation and filtering of a cohort. Represents
a lightweight class capable of saving the filters used to extract a single cohort from a dataset;</p></li>
<li><p><a class="reference internal" href="cohort_manager.html#cohort-manager"><span class="std std-ref">cohort.CohortManager</span></a>: allows the application of different data processing
pipelines over each cohort. Also allows the creation and filtering of multiple cohorts using a simple
interface. Finally, allows the creation of different estimators for each cohort using the <code class="docutils literal notranslate"><span class="pre">.predict()</span></code>
and <code class="docutils literal notranslate"><span class="pre">predict_proba()</span></code> interfaces. This class uses the <a class="reference internal" href="cohort_definition.html#cohort-def"><span class="std std-ref">cohort.CohortDefinition</span></a>
internally in order to create, filter, and manipulate multiple cohorts.</p></li>
<li><p><a class="reference internal" href="decoupled_class.html#decoupled-class"><span class="std std-ref">cohort.DecoupledClass</span></a>: allows training different estimators (models) for different
cohorts and combining them in a way that optimizes different definitions of group fairness. It also allows
leveraging transfer learning for minority cohorts when the training data for such cohorts is not sufficient.
The technique was originally presented in <a class="reference external" href="https://www.microsoft.com/en-us/research/publication/decoupled-classifiers-for-group-fair-and-efficient-machine-learning/">“Decoupled classifiers for group-fair and efficient machine
learning.”</a>
(<em>Cynthia Dwork, Nicole Immorlica, Adam Tauman Kalai, and Max Leiserson. Conference on fairness,
accountability and transparency. PMLR, 2018</em>).</p></li>
</ul>
</div></blockquote>
<p><strong>Highlights include:</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>Interface for breaking a dataset into multiple cohorts.</p></li>
<li><p>Two approaches for defining cohorts: based on the different values of a column, or based on custom filters.</p></li>
<li><p>Creation of custom pipelines for each cohort, allowing the creation of different estimators for each cohort.
Possibility to search and combine the custom estimators for each cohort such that jointly they optimize a group fairness definition of choice.</p></li>
<li><p>Mitigating cases with low representation data for minority cohorts through transfer learning.</p></li>
<li><p>Simple interface, which also implements the <code class="docutils literal notranslate"><span class="pre">.fit()</span></code>, <code class="docutils literal notranslate"><span class="pre">.transform()</span></code>, <code class="docutils literal notranslate"><span class="pre">.predict()</span></code>, <code class="docutils literal notranslate"><span class="pre">.predict_proba()</span></code>, and <code class="docutils literal notranslate"><span class="pre">.fit_resample()</span></code> methods
(some of these methods will only be available depending on the transformations/estimators in the custom pipelines defined for each cohort).</p></li>
</ul>
</div></blockquote>
<section id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this heading"></a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="cohort.html">Cohort</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cohort_definition.html">CohortDefinition</a></li>
<li class="toctree-l2"><a class="reference internal" href="cohort_manager.html">CohortManager</a></li>
<li class="toctree-l2"><a class="reference internal" href="cohort_handler.html">CohortHandler</a></li>
<li class="toctree-l2"><a class="reference internal" href="decoupled_class.html">DecoupledClass</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html">Cohort Utils</a></li>
</ul>
</li>
</ul>
</div>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this heading"></a></h2>
<p>All notebooks listed here can be found in the folder <strong>notebooks/cohort/</strong>.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="module_tests.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="case_studies.html">Cohort Case Studies</a></li>
</ul>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../databalanceanalysis/intro.html" class="btn btn-neutral float-left" title="DataBalanceAnalysis" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="module_tests.html" class="btn btn-neutral float-right" title="Tutorials" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Microsoft.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>